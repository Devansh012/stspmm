{% extends 'registration/base.html' %}
{% block content %}
  <h2>DCI List</h2>
  <a href="{% url 'dciCreateView' %}">
    <button type="button" class="btn btn-primary btn-sm" style="float:right;">Add New</button>
  </a>
  <div class="container mt-3 mb-5"></div> <!-- Added bottom margin here -->

  <table class="table table-striped table-hover">
    <thead>
      <tr class="m-5 p-8 text-center">
        <th class="text-start">Project Name</th>
        <th class="text-start">DCI Name</th>
        <th class="text-end">DCI Group</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for dc in dci %}
        <tr class="text-center">
          <td class="text-start">{{ dc.project }}</td>
          <td class="text-start">{{ dc.name }}</td>
          <td class="text-end">
            <a href="{% url 'dciOfDciGroup' dc.id %}" data-bs-toggle="tooltip" title="View DCI Groups">
              <i class="fas fa-layer-group"></i>
            </a>
          </td>
          <td class="text-end">
            <a href="{% url 'copyDci' dc.id %}" data-bs-toggle="tooltip" title="Copy DCI"><i class="fas fa-copy"></i></a>

            <a href="{% url 'dciUpdateView' dc.id %}" data-bs-toggle="tooltip" title="Edit DCI"><i class="fas fa-edit"></i></a>
            
            <form action="{% url 'dciDeleteView' dc.id %}" method="post" style="display:inline;" id="delete-form-{{ dc.id }}">
                {% csrf_token %}
                <button type="submit" style="border:none; background:none; padding:0;" data-bs-toggle="tooltip" title="Delete DCI">
                    <i class="fas fa-trash"></i>
                </button>
            </form>
            
        
            <script>
                document.querySelector('#delete-form-{{ dc.id }}').addEventListener('submit', function (event) {
                    if (!confirm('Are you sure you want to delete this item "{{ dc.name }}"?')) {
                        event.preventDefault();
                    }
                });
            </script>
        </td>
        
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Initialize Bootstrap Tooltips -->
  <script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });
  </script>
{% endblock %}
