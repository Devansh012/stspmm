{% extends "registration/base.html" %}
{% block content %}
    <h2>Folder List</h2>
    <a href="{% url 'folderCreateView' %}">
        <button type="button" class="btn btn-primary btn-sm" style="float:right;">Add New</button>
    </a>

    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Created By</th>
          <th>Created Date</th>
          <th>Notes</th>
          <th>Protected</th>
          <th>Password</th>
          <th>Documents</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for folder in folders %}
        <tr>
          <td>{{ folder.name }}</td>
          <td>{{ folder.createdBy}}</td>
          <td>{{ folder.createdDate }}</td>
          <td>{{ folder.notes }}</td>
          <td>{{ folder.protected }}</td>
          <td>{{ folder.password }}</td>
          <td>
            <a href="{% url 'documentList' folder.id %}"><button type="button" class="btn btn-primary">Documents</button></a>
          </td>

          <td>
            <a href="{% url 'folderUpdateView' folder.id %}"><button type="button" class="btn btn-primary">Edit</button></a>
            <form action="{% url 'folderDeleteView' folder.id %}" method="post" style="display:inline;" id="delete-form-{{ folder.id }}">
              {% csrf_token %}
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
            <script>
              document.querySelector('#delete-form-{{ folder.id }}').addEventListener('submit', function (event) {
                if (!confirm('Are you sure you want to delete this item "{{ folder.name }}"?')) {
                  event.preventDefault() // Prevent form submission if the user cancels
                }
              })
            </script>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
{% endblock %}
